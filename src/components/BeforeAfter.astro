---
// Before & After carousel component
---

<section class="py-20 px-4 sm:px-6 lg:px-8 bg-white">
  <div class="max-w-7xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <h2 class="text-4xl sm:text-5xl font-bold text-gray-900 mb-4">
        Before & After Results
      </h2>
      <p class="text-xl text-gray-600 max-w-2xl mx-auto">
        Real transformations from real patients. See the life-changing results we deliver every day.
      </p>
    </div>

    <!-- Carousel -->
    <div class="relative">
      <div class="carousel-container overflow-hidden">
        <div class="carousel-track flex gap-6 transition-transform duration-500 ease-out">
          <!-- Case 1 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_eiukraeiukraeiuk.png"
                alt="Before and After Case 1"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 2 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_ewtszcewtszcewts.png"
                alt="Before and After Case 2"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 3 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_f7ocsof7ocsof7oc.png"
                alt="Before and After Case 3"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 4 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_iivf73iivf73iivf.png"
                alt="Before and After Case 4"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 5 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_n7xwgnn7xwgnn7xw.png"
                alt="Before and After Case 5"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 6 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_vfsdp3vfsdp3vfsd.png"
                alt="Before and After Case 6"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 7 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/2 Gemini_Generated_Image_xnmuaqxnmuaqxnmu copy.png"
                alt="Before and After Case 7"
                class="w-full h-auto"
              />
            </div>
          </div>

          <!-- Case 8 -->
          <div class="carousel-item flex-shrink-0 w-full md:w-1/2 lg:w-1/3">
            <div class="rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-shadow">
              <img
                src="/images/before-after/Gemini_Generated_Image_xnmuaqxnmuaqxnmu.png"
                alt="Before and After Case 8"
                class="w-full h-auto"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Arrows -->
      <button
        class="carousel-prev absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 bg-white rounded-full p-3 shadow-lg hover:bg-gray-50 transition z-10"
        aria-label="Previous"
      >
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>

      <button
        class="carousel-next absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 bg-white rounded-full p-3 shadow-lg hover:bg-gray-50 transition z-10"
        aria-label="Next"
      >
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>

      <!-- Dots Indicator -->
      <div class="flex justify-center gap-2 mt-8">
        <button class="carousel-dot w-3 h-3 rounded-full bg-blue-500" data-index="0"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="1"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="2"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="3"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="4"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="5"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="6"></button>
        <button class="carousel-dot w-3 h-3 rounded-full bg-gray-300" data-index="7"></button>
      </div>
    </div>
  </div>
</section>

<style>
  .carousel-container {
    position: relative;
  }

  .carousel-track {
    display: flex;
  }

  @media (max-width: 768px) {
    .carousel-item {
      width: 100%;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .carousel-item {
      width: 50%;
    }
  }

  @media (min-width: 1025px) {
    .carousel-item {
      width: 33.333%;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const track = document.querySelector('.carousel-track');
    const items = document.querySelectorAll('.carousel-item');
    const prevBtn = document.querySelector('.carousel-prev');
    const nextBtn = document.querySelector('.carousel-next');
    const dots = document.querySelectorAll('.carousel-dot');

    let currentIndex = 0;
    const totalItems = items.length;

    function getItemsPerView() {
      if (window.innerWidth < 769) return 1;
      if (window.innerWidth < 1025) return 2;
      return 3;
    }

    function updateCarousel() {
      const itemsPerView = getItemsPerView();
      const maxIndex = Math.max(0, totalItems - itemsPerView);
      currentIndex = Math.min(currentIndex, maxIndex);

      const itemWidth = items[0].offsetWidth;
      const gap = 24; // gap-6 = 24px
      const offset = -(currentIndex * (itemWidth + gap));

      track.style.transform = `translateX(${offset}px)`;

      // Update dots
      dots.forEach((dot, index) => {
        if (index === currentIndex) {
          dot.classList.remove('bg-gray-300');
          dot.classList.add('bg-blue-500');
        } else {
          dot.classList.remove('bg-blue-500');
          dot.classList.add('bg-gray-300');
        }
      });

      // Update button states
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex >= maxIndex;

      prevBtn.style.opacity = currentIndex === 0 ? '0.5' : '1';
      nextBtn.style.opacity = currentIndex >= maxIndex ? '0.5' : '1';
    }

    prevBtn?.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateCarousel();
      }
    });

    nextBtn?.addEventListener('click', () => {
      const itemsPerView = getItemsPerView();
      const maxIndex = totalItems - itemsPerView;
      if (currentIndex < maxIndex) {
        currentIndex++;
        updateCarousel();
      }
    });

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentIndex = index;
        updateCarousel();
      });
    });

    window.addEventListener('resize', updateCarousel);
    updateCarousel();
  });
</script>
